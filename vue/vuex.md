# vuex

这次来聊一聊vuex的内容，由于公司最近用的项目一直都是vue，所以研究了一会vuex

## 为什么要用vuex

首先在使用之前，肯定会有一定的需求会使用到vuex，基本我公司的现状，我们使用vuex的理由一共只有以下两点

1. 组件层级比较深，使用vuex做数据层
2. 公用数据的维护以及处理

确实，正常应用，只要我们设计到这两个方向上，总会去选择一款状态管理的库，而在vue里面，最常用的就是vuex

那么，vuex具体做了什么事情

## vuex做了什么

### 数据集中管理

vuex申请了一个store，将所有数据维护在一个store上面，同时，将这个store挂载在了vue上，这就说明了一件事情，只要我们的应用启动，那么我们的数据中一定会带上store的数据，不管我们是否需要

### 纯函数修改状态

vuex使用了mutation来做一种修改状态的方法，但是，基于vue observe的原因，直接修改store中的数据依旧能够起到修改数据的作用，所以难以起到一种强制规范走mutation的过程，同样的action也存在同样的问题，在vuex中，action是用来处理有副作用的方法，但是在实际使用过程中，并没有完全用上action，因为使用的数据是跟全局数据无关，直接使用的请求然后修改数据

那么，mutation跟action，唯一起到的作用就是只有一个聚合，一个mutation或者一个action对应的一个事件，一个响应

例如，我们获取用户信息，可以设置成一个action，但是除此之外，并没有体现出了action跟mutation的好处

### 模块

vuex可以申请多种模块，来将数据分割开来，但是所有的数据依旧还是挂载在vue上面，从本质上来讲，就是一个Object，将不同的module解析成了不同的key来塞到vue的Object里面，并实现了observe的监听

### 插件

在vuex里面，插件类似于一个中间层的概念，没触发一个mutation将会触发所有的plugins，并在在插件当中是不能直接修改store中的数值，毕竟不是直接存在于vue上面，vue的defineObjectPrototype并不能作用于plugins中，所以直接修改并不能导致我们页面进行更新

