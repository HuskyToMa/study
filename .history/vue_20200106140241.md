## VUE学习笔记

> vue2.0的源码阅读

[vue的源码阅读思维导图](https://www.processon.com/view/link/5e0dc665e4b0f8e58dc860bd)

![vue思维导图](./public/image/8.png)

### 为什么用proxy代替definePrototype

1. definePrototype 不能够监听数组的方法，vue里面是重写了数组方法
2. definePrototype 只能监听一个对象上的一个属性，监听一个对象需要循环遍历，proxy不用

### vue执行更新的步骤是什么

1. 通过Dep类进行依赖搜集
2. 通过Watcher类进行监听属性变化
3. 通过Scheduler进行使用调度
    - 收集变化的属性（queue）
    - 使用nextTick进行更新（调用Watcher的run）

### nextTick做了什么

判断使用什么样的方法进行异步调用

1. promise
2. MutationObserver
3. setImmediate
4. setTimeout

按照上面的顺序依次判断，存在即使用

### directives是怎么实现的

### slot的scope是怎么实现的

存在v-slot的组件会在父组件以及子组件中间在重新添加一个标签，将scope的数据通过新的标签传给子组件

### computed怎么实现的

实际上是一个Watcher对象，Watcher里面有一个dirty的参数来控制是否更新，在update的时候会将dirty设置为true

### 为什么能在this上访问到data的属性

vue将数据放在this._data上面，并在this上面设置了监听，返回值是从this._data上返回的

### forceUpdate干了什么

将所有的watcher重新进行运算

### vue的$on,$emit等event是怎么实现的

Vue的prototype上添加了一个events，`$on` 将方法添加到events中，`$off` 删除

### Vue.use 做了什么



### vue的ast树怎么转换成VNode

### vue不能通过$set修改this上的数据吗