# VUE学习笔记

> vue2.0的源码阅读

[vue的源码阅读思维导图](https://www.processon.com/view/link/5e0dc665e4b0f8e58dc860bd)

## 目录结构

1. benchmarks： 基础文件内容
2. examples：例子
3. flow：flow文件定义类型的地方
4. packages： vue相关的包
5. scripts：js脚本
6. src：核心文件
    - compiler： 编译器文件
    - core：核心中的核心
    - platforms: web与weex支持
    - server：服务端支持
    - sfc：文件解析
    - shared：公共js方法库
7. test：测试文件
8. types：支持ts语言的内容

## 笔记

### 暂时不知道什么意思

1. 在vue init的时候调用 resolveConstructorOptions 方法
2. option中的$parent字段是哪里解析出来的

### 随手笔记

1. vue会在初始化的时候监听 $isServer，判断是否是服务端渲染，该属性从node的环境变量中传入（VUE_ENV）
2. $ssrContext属性可以获取到虚拟dom的元素表达式
3. 写vue组件的时候使用component: true，会提高性能
4. vue的use，mixin，extend方法在初始化的时候就添加到Vue的全局对象当中
5. vue.extend方法，有三种数据维护
    - 自身的options superOptions， 自身使用的options
    - 缓存自身的options sealedOptions，用户判断options是否变化
    - 扩展的options extendOptions，拓展添加的options
6. vue添加observable方法，用户监听某个字段，内部调用observe方法
7. nextTick方法，传入一个function，根据不同的宿主环境调用不同的方法去执行nextTick方法
    - 可以使用promise的环境，直接在promise.then中调用所有的callbacks方法
    - ie低版本环境，
    - IOS环境
    - 其他环境，上述环境都不存在的时候使用setTimeout
    - node 环境下用 setImmediate 
8. vue set/delete 方法调用到observe的内部的set跟del方法，添加监听或者删除元素
9. vue 通过gollup打包将多个js模块整合到一起
10. vue将template模板语言转换成ast语法，直接生成js能看懂的

### parse html

将 template 转换成 虚拟dom

1. /^<!\--/ 正则判断是否是注释，选择是否保留注释，不保留就删除
2. /^<!\[/ 道理同上
3. /^<!DOCTYPE [^>]+>/i 处理doctype的开头内容

